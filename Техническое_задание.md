# Техническое задание  
## Система DevManager

### 1. Назначение  
DevManager — веб-система для обучения детей web-программированию (HTML, CSS, JS, PHP). Система предназначена для организации учебного процесса, управления проектами, заданиями и взаимодействия между учениками и администратором.

---

### 2. Основные функции

#### 2.1. Авторизация и роли  
- Авторизация пользователей по логину и паролю.
- Роли: администратор (создаёт, редактирует и удаляет пользователей), ученик.
- Регистрация и управление пользователями (создание, редактирование, удаление) доступны только администратору через отдельный интерфейс.
- Администратор может сбрасывать пароль пользователя.
- Ученик не может самостоятельно зарегистрироваться или изменить свои данные (только просмотр профиля).
- Для всех действий с пользователями реализована проверка прав доступа.

#### 2.2. Проекты  
- Каждый пользователь может создавать неограниченное количество проектов.
- Проект — это папка с произвольной структурой файлов (HTML, CSS, JS, PHP и др.).
- Возможность редактирования любого файла проекта через встроенный редактор кода.
- Возможность создавать, удалять и переименовывать файлы в проекте.
- Возможность предпросмотра проекта (отдельная страница, открывающая index.html).
- Администратор может просматривать все проекты всех пользователей.

#### 2.3. Задания/курсы  
- Администратор может создавать задания (название, описание).
- Ученики могут прикреплять свои проекты к заданиям.
- В системе отображается список заданий и прикреплённых к ним проектов.

#### 2.4. Автоматическая проверка кода  
- Для каждого проекта реализована автоматическая проверка:
  - HTML: наличие тегов `<h1>`, `<img>`, `<script>`.
  - CSS: наличие селектора body с background, наличие CSS-класса.
  - JS: наличие функций, наличие вызова alert().
- Результаты проверки отображаются пользователю.

#### 2.5. История изменений файлов  
- При каждом сохранении файла в проекте создаётся резервная копия (с меткой времени).
- Пользователь может просматривать историю изменений для любого файла проекта.
- Возможность восстановления файла из истории изменений.

#### 2.6. Экспорт и импорт проектов  
- Возможность скачать проект в виде zip-архива.
- Возможность импортировать проект из zip-архива.
- При импорте проверяется наличие index.html и допустимых расширений файлов.

#### 2.7. Уведомления  
- Система уведомлений для пользователей:
  - О новых заданиях (всем ученикам).
  - О прикреплении проекта к заданию (администратору).
  - О изменении файлов проекта (владельцу проекта, если редактирует не он).
  - О приглашении в совместный проект.
  - О новых комментариях (если реализовано).
- Просмотр и отметка уведомлений как прочитанных.

#### 2.8. Профили пользователей  
- Страница профиля с информацией о пользователе и списком его проектов.
- Возможность просмотра профиля любого пользователя (администратором).
- В профиле отображается статистика активности пользователя.

#### 2.9. Мультиязычность  
- Поддержка русского, английского и белорусского языков интерфейса.
- Все надписи, кнопки и сообщения используют систему t() и языковые файлы.

#### 2.10. Мобильная адаптация  
- Интерфейс адаптирован для мобильных устройств (использование Bootstrap и responsive-верстки).

#### 2.11. Структура проекта  
- Все папки проекта имеют префикс `dev_` (например, `dev_app`, `dev_views`, `dev_data`, `dev_lang`).
- Не используются сторонние библиотеки и composer.

#### 2.12. Статистика активности  
- Для каждого пользователя и по системе в целом отображается:
  - Количество созданных проектов.
  - Количество коммитов (сохранений файлов).
  - Количество комментариев (если реализовано).
  - Другие действия (по необходимости).
- Статистика отображается в профиле пользователя и на отдельной странице для администратора.
- Данные статистики обновляются автоматически при совершении соответствующих действий.
- Возможность экспорта статистики в формате JSON.

#### 2.13. Встроенный предпросмотр мобильной/десктопной версии  
- Для каждого проекта реализовать встроенный предпросмотр с возможностью эмуляции разных устройств (мобильное, планшет, десктоп).
- Пользователь может выбрать тип устройства для предпросмотра (например, выпадающий список: "Мобильный", "Планшет", "Десктоп").
- Предпросмотр отображается внутри стилизованной рамки, имитирующей выбранное устройство (размеры и внешний вид рамки соответствуют устройству).
- Эмуляция размеров:  
  - Мобильный: ~375x667px  
  - Планшет: ~768x1024px  
  - Десктоп: ~1280x800px  
- Рамка должна быть адаптивной и визуально отделять предпросмотр от остального интерфейса.
- Переключение между устройствами не требует перезагрузки страницы (реализовать на JS).

#### 2.14. Рейтинг/оценка проектов  
- Пользователи могут ставить оценки (от 1 до 5) любому проекту, кроме своих и проектов, где они участники.
- Для каждого проекта отображается средний балл и количество оценок.
- Один пользователь может оценить один проект только один раз, может удалить свою оценку.
- Оценки хранятся в отдельном JSON-файле.

#### 2.15. Режим совместной работы  
- Проект может иметь нескольких участников (учеников).
- Владелец проекта может приглашать других учеников к совместной работе.
- Все участники проекта могут редактировать файлы, история изменений фиксирует автора изменений.
- В профиле пользователя отображаются как личные проекты, так и проекты, где он участник.
- В интерфейсе отображается список участников проекта.
- Участник может выйти из совместного проекта.

---

### 3. Технологии  
- Чистый PHP (без фреймворков и composer).
- HTML, CSS, JS (Bootstrap, Monaco Editor через CDN).
- Хранение данных — JSON-файлы в папке `dev_data`.

---

### 4. Требования к безопасности  
- Проверка прав доступа для всех действий.
- Защита от XSS при выводе пользовательских данных.
- Проверка расширений файлов при импорте/создании.
- Проверка структуры архива при импорте.

---

### 5. Структура каталогов  
- `dev_app/dev_core` — ядро и утилиты.
- `dev_app/dev_controllers` — контроллеры.
- `dev_views` — шаблоны интерфейса.
- `dev_lang` — языковые файлы.
- `dev_data` — данные пользователей, проектов, заданий, уведомлений.

---

### 6. Дополнительно  
- Возможность расширения системы (например, добавление комментариев, рейтингов, статистики).
- Чистый и понятный код, подробные комментарии ко всем функциям и методам.
- Интерфейс и все страницы должны быть адаптированы для мобильных устройств (использование Bootstrap и responsive-верстки).
- Все новые функции должны соответствовать требованиям безопасности и мультиязычности.
- Любое расширение должно сохранять структуру dev_* и не использовать сторонние библиотеки/composer.
- **Статистика активности:** отображение количества проектов, коммитов (сохранений файлов), комментариев и других действий пользователя и по системе в целом.

---

### 7. Пример сценария использования

1. Администратор создаёт нового пользователя-ученика через интерфейс управления пользователями.
2. Ученик входит в систему, создаёт проект, добавляет и редактирует файлы (HTML, CSS, JS, PHP).
3. Ученик прикрепляет проект к заданию, созданному администратором.
4. Система автоматически проверяет проект по критериям (HTML, CSS, JS).
5. Администратор и ученик получают соответствующие уведомления.
6. Любой пользователь может просматривать историю изменений файлов, экспортировать и импортировать проекты.
7. Интерфейс доступен на русском, английском и белорусском языках и корректно отображается на мобильных устройствах.

---

### 8. Требования к статистике активности

- Статистика должна быть реализована с минимальной нагрузкой на систему (подсчёт по данным JSON или кэширование).
- Для каждого пользователя в профиле отображаются:
  - Общее количество проектов.
  - Общее количество коммитов (сохранений файлов) по всем проектам.
  - Количество комментариев (если реализовано).
- Для администратора доступна отдельная страница с общей статистикой по системе:
  - Количество пользователей по ролям.
  - Общее количество проектов.
  - Общее количество коммитов.
  - Количество комментариев.
- Статистика должна обновляться автоматически при совершении действий (создание проекта, сохранение файла, добавление комментария и т.д.).
- Данные статистики должны быть доступны для экспорта (например, в формате JSON).

---
